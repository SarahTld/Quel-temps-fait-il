import{_ as S}from"./C56uKZvf.js";import{r as x,g as j,j as A,c as a,a as t,l as b,t as s,F as E,y as L,b as N,w as R,o as n,d as c,z as V}from"./DuGDK2SR.js";import{u as $}from"./aARV7R7-.js";const D={class:"min-h-screen bg-gradient-to-br from-blue-100 via-blue-50 to-white dark:from-gray-900 dark:via-gray-800 dark:to-gray-900"},I={class:"container mx-auto px-4 py-8"},M={key:0,class:"bg-red-100 dark:bg-red-900/20 border border-red-400 dark:border-red-600 text-red-700 dark:text-red-300 px-4 py-3 rounded-xl mb-6 text-center"},U={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},T={class:"flex justify-between items-start mb-4"},z={class:"text-xl font-semibold text-blue-800 dark:text-blue-100"},B={key:0,class:"text-sm text-blue-600 dark:text-blue-300"},O={class:"flex gap-2"},W=["onClick"],J=["onClick"],K={key:0,class:"text-center"},P={class:"text-4xl mb-3"},q={class:"text-3xl font-bold text-blue-800 dark:text-blue-100 mb-2"},H={class:"text-blue-600 dark:text-blue-300 capitalize mb-3 text-lg"},Y={class:"text-xs text-blue-500 dark:text-blue-400 mb-3"},G={class:"grid grid-cols-2 gap-4 text-sm"},Q={class:"bg-blue-50 dark:bg-blue-900/30 rounded-lg p-2"},X={class:"font-semibold text-blue-800 dark:text-blue-100"},Z={class:"bg-green-50 dark:bg-green-900/30 rounded-lg p-2"},ee={class:"font-semibold text-green-800 dark:text-green-100"},te={class:"mt-3 text-xs text-gray-500 dark:text-gray-400"},oe={key:1,class:"text-center text-blue-600 dark:text-blue-300 py-8"},re={key:2,class:"text-center text-blue-600 dark:text-blue-300 py-16"},se="https://api.openweathermap.org/data/2.5/weather",ce={__name:"favoris",setup(ae){const d=x([]),u=x(""),g=j().public.openweatherKey,{getApiUnits:h,formatTemperature:p,formatWindSpeed:v}=$();A(()=>{_(),window.addEventListener("units-changed",()=>{d.value.length>0&&d.value.forEach(r=>{m(r)})})});function _(){const r=localStorage.getItem("weather-favorites");r&&(d.value=JSON.parse(r),d.value.forEach(e=>{m(e)}))}function k(){localStorage.setItem("weather-favorites",JSON.stringify(d.value))}async function m(r){try{const e=`${se}?q=${encodeURIComponent(r.name)}&appid=${g}&units=${h()}&lang=fr`,l=await fetch(e);if(l.ok){const o=await l.json(),i=new Date;r.weather={temp:p(o.main.temp),description:o.weather[0].description,humidity:o.main.humidity,wind:v(o.wind.speed),icon:o.weather[0].icon,date:i.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),time:i.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}}}catch(e){console.error("Erreur lors du chargement de la météo pour",r.name,e)}}function f(r){d.value.splice(r,1),k()}function w(r){V(`/carte?city=${encodeURIComponent(r.name)}`)}function y(r){return{"01d":"☀️","01n":"🌙","02d":"⛅","02n":"☁️","03d":"☁️","03n":"☁️","04d":"☁️","04n":"☁️","09d":"🌧️","09n":"🌧️","10d":"🌦️","10n":"🌧️","11d":"⛈️","11n":"⛈️","13d":"❄️","13n":"❄️","50d":"🌫️","50n":"🌫️"}[r]||"🌤️"}function C(r){return new Date(r).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})}return(r,e)=>{const l=S;return n(),a("div",D,[t("div",I,[e[7]||(e[7]=t("h1",{class:"text-4xl font-bold text-blue-700 dark:text-blue-200 mb-8 text-center"}," Mes Villes Favorites ",-1)),u.value?(n(),a("div",M,s(u.value),1)):b("",!0),d.value.length?(n(),a("div",U,[(n(!0),a(E,null,L(d.value,(o,i)=>(n(),a("div",{key:i,class:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/50 dark:border-gray-700/50 hover:shadow-2xl transition-all duration-300 group"},[t("div",T,[t("div",null,[t("h3",z,s(o.name),1),o.country?(n(),a("p",B,s(o.country),1)):b("",!0)]),t("div",O,[t("button",{onClick:F=>w(o),class:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors p-1",title:"Voir sur la carte"}," 🗺️ ",8,W),t("button",{onClick:F=>f(i),class:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors p-1",title:"Supprimer des favoris"}," ❌ ",8,J)])]),o.weather?(n(),a("div",K,[t("div",P,s(y(o.weather.icon)),1),t("div",q,s(o.weather.temp),1),t("div",H,s(o.weather.description),1),t("div",Y,[c(s(o.weather.date),1),e[0]||(e[0]=t("br",null,null,-1)),c(s(o.weather.time),1)]),t("div",G,[t("div",Q,[e[1]||(e[1]=t("div",{class:"text-blue-700 dark:text-blue-200"},"Humidité",-1)),t("div",X,s(o.weather.humidity)+"%",1)]),t("div",Z,[e[2]||(e[2]=t("div",{class:"text-green-700 dark:text-green-200"},"Vent",-1)),t("div",ee,s(o.weather.wind)+" km/h",1)])]),t("div",te," Ajouté le "+s(C(o.addedAt)),1)])):(n(),a("div",oe,e[3]||(e[3]=[t("div",{class:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"},null,-1),c(" Chargement... ")])))]))),128))])):(n(),a("div",re,[e[5]||(e[5]=t("h2",{class:"text-2xl font-bold mb-4"},"Aucune ville favorite",-1)),e[6]||(e[6]=t("p",{class:"text-lg mb-6"},"Commencez par ajouter des villes depuis la carte météo",-1)),N(l,{to:"/carte",class:"bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white px-8 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200 inline-flex items-center gap-2"},{default:R(()=>e[4]||(e[4]=[c(" Aller à la carte ")])),_:1,__:[4]})]))])])}}};export{ce as default};
